#include <primitives/analyzetx.h>
#include <json_spirit/json_spirit.h>
#include <json_spirit/json_spirit_writer_template.h>

using namespace std;
using namespace json_spirit;

void testAnalyzeTx()
{
    //analyzeTx("0100000001485aa6d56c250978b29ccf1fad8a203b8ba6d90b57d6183f476fc7d4bdaa200a000000006a47304402200f54a5679cad6c3754efb4df84a365b87040706d4e984fcb00f97bbbce666f7a02203b81d99fd128a41a57198918bfe34227c1358378c1bd57b9db9c6f80bbdf3e46012103b8ad94954ca336de4a03e7b02e1b72a1a6ec2828702cbec10bbe053557690b80ffffffff020000000000000000331473706b65171b77de7a2e473893d27ad021102430750b73706b6b746573744b6579756a0e7465737420666f722064656d6f2e00000000000000001976a914e828514d314a5e8080f4e95e411d9eb95d922e3488ac00000000");
    Object parsedStream = analyzeTx("0100000001485aa6d56c250978b29ccf1fad8a203b8ba6d90b57d6183f476fc7d4bdaa200a000000006a47304402200f54a5679cad6c3754efb4df84a365b87040706d4e984fcb00f97bbbce666f7a02203b81d99fd128a41a57198918bfe34227c1358378c1bd57b9db9c6f80bbdf3e46012103b8ad94954ca336de4a03e7b02e1b72a1a6ec2828702cbec10bbe053557690b80ffffffff020000000000000000331473706b65171b77de7a2e473893d27ad021102430750b73706b6b746573744b6579756a0e7465737420666f722064656d6f2e00000000000000001976a914e828514d314a5e8080f4e95e411d9eb95d922e3488ac00000000");
    string strParsedStream = write_string(Value(parsedStream), true);
    cout << strParsedStream << endl;
    //cout << "test" << endl;

    //Object parsedAsset = analyzeTx("010000000126b83ab67963139af46c5d640651bc482f2a1e55743c2cf767b55a1cf30af3a9000000006a473044022050d1b55dd8c33d258f446408fa6ac86128f1ed5dc06d13d888b0b56a9d531fe3022075e55263d29b25f4033b2d9cc8dd1279ac76c27789d37a2456728e15cc5121aa012103ea2cbe04a7e414aa71f8a709fd8d09e5521c695ea0b4daa0d2ee182b0417c59effffffff0200000000000000003776a914d806940ddc6d27dab4c2de6f1d6aca0aff20d0c688ac1c73706b712f2a1e55743c2cf767b55a1cf30af3a90a000000000000007500000000000000003776a914097b6744e025e751e6cbb5fef1f557e1ca590ed588ac1c73706b712f2a1e55743c2cf767b55a1cf30af3a906270000000000007500000000");
    //Object parsedAsset = analyzeTx("0100000001c0a899301cd8e2cd0e6ccad1e0268445a42dabe9911aef24b5641af2a36baa5d000000006b48304502210083c5924a04c539df41b8bcc62d85aae0f4d73b908c6384840a6d8ab3ed16c1780220572fa25c6021c6d5c44b2af8b1a8e0c3f8dcf1e70245d60e6645420ca33538e7012103ea2cbe04a7e414aa71f8a709fd8d09e5521c695ea0b4daa0d2ee182b0417c59effffffff0200000000000000003776a914d806940ddc6d27dab4c2de6f1d6aca0aff20d0c688ac1c73706b712f2a1e55743c2cf767b55a1cf30af3a90a000000000000007500000000000000003776a914097b6744e025e751e6cbb5fef1f557e1ca590ed588ac1c73706b712f2a1e55743c2cf767b55a1cf30af3a9f2260000000000007500000000");
    Object parsedAsset = analyzeTx("0100000001e19bdd7aff7f6a10357573da6a1b5f525dda74826f381e40f97b4024da8d53b5010000006a4730440220617c36f341c02f6b10c51ea6e5c0a036f7dfaa8511349dd930060bdc7572433e022018b177f941c5cf38fb9dab3b2a6bafdde8734371c69758a944ec3c48bfe3ab23012103ea2cbe04a7e414aa71f8a709fd8d09e5521c695ea0b4daa0d2ee182b0417c59effffffff0200000000000000003776a914d806940ddc6d27dab4c2de6f1d6aca0aff20d0c688ac1c73706b712f2a1e55743c2cf767b55a1cf30af3a90a000000000000007500000000000000003776a914097b6744e025e751e6cbb5fef1f557e1ca590ed588ac1c73706b712f2a1e55743c2cf767b55a1cf30af3a9f2260000000000007500000000");
    string strParsedAsset = write_string(Value(parsedAsset), true);
    cout << strParsedAsset << endl;

}

int main()
{
    testAnalyzeTx();

    return 0;
}
